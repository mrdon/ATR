<atlassian-plugin key="${atlassian.plugin.key}" name="${pom.name}" pluginsVersion="2">
    <plugin-info>
        <description>${pom.description}</description>
        <version>${pom.version}</version>
        <vendor name="${pom.organization.name}" url="${pom.organization.url}"/>
        <bundle-instructions>
            <Export-Package>
                com.atlassian.templaterenderer.velocity.one.six,
                org.apache.velocity.*; version=1.6.1
            </Export-Package>
        </bundle-instructions>
    </plugin-info>

    <!-- SAL components -->
    <component-import key="i18nResolver" interface="com.atlassian.sal.api.message.I18nResolver"/>

    <!-- Imported so that it can be used by the context item as a component reference -->
    <component-import key="webResourceManager" interface="com.atlassian.plugin.webresource.WebResourceManager"/>
    <!-- This is imported here because plugins doesn't currently support automatic host component imports from
            bundled jars PLUG-362 -->
    <component-import key="pluginAccessor" interface="com.atlassian.plugin.PluginAccessor"/>

    <component key="templateContextFactory" name="Template Context Factory"
        description="Factory for creating the template context"
        class="com.atlassian.templaterenderer.plugins.TemplateContextFactoryImpl" public="true">
        <interface>com.atlassian.templaterenderer.plugins.TemplateContextFactory</interface>
    </component>

    <component key="velocity-1.6-template-renderer"
            class="com.atlassian.templaterenderer.velocity.one.six.internal.VelocityTemplateRendererServiceFactory"
            public="true">
        <interface>com.atlassian.templaterenderer.TemplateRenderer</interface>
        <interface>com.atlassian.templaterenderer.velocity.one.six.VelocityTemplateRenderer</interface>
    </component>

    <component key="velocity-1.6-template-renderer-factory"
            class="com.atlassian.templaterenderer.velocity.one.six.internal.VelocityTemplateRendererFactoryServiceFactory"
            public="true">
        <interface>com.atlassian.templaterenderer.TemplateRendererFactory</interface>
        <interface>com.atlassian.templaterenderer.velocity.one.six.VelocityTemplateRendererFactory</interface>
    </component>

    <module-type key="template-context-item"  name="Template Context Item"
        description="Allows plugins to add beans into the velocity context of the TemplateRenderer"
        class="com.atlassian.templaterenderer.plugins.TemplateContextItemModuleDescriptor"/>

    <template-context-item key="i18nResolverContextItem" name="Context Item for Internationalisation"
        description="Puts the I18nResolver into the template renderer context"
        component-ref="i18nResolver" context-key="i18n" global="true"/>

    <template-context-item key="webResourceManagerContextItem" name="Context Item for Web Resource Manager"
        description="Puts the webResourceManager into the template renderer context"
        component-ref="webResourceManager" context-key="webResourceManager" global="true"/>
    
</atlassian-plugin>